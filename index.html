
<!DOCTYPE html>
<html>
    <head>
        <title>Just Write</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    </head>
    <body>

            <textarea id="page" placeholder="A simple, minimalistic text editor with computer terminal styled interaction. Choose your favorite theme and enjoy the writing process. 

            All of this will disappear when you start typing. The goal is to get everything is out of the way so you can focus and just write...
            
            Here are a few commands you can try down in the bottom left corner:
                 > save [filename] - Downloads a text file of your document
                 > set theme [theme] - Change the look and feel of the editor
                 > help - Opens the full usage guide in the code repository
                 > contribute - Find out how to help improve this site
            
            Time to get to work."></textarea>
        
        <input id="commandprompt" type="text" placeholder =">/" size=30/>
        
        <div id="bottomright">
        <span id="wordcount">0 words</span>
        <span>-</span>
        <span>0 reading time</span>
        <span>-</span>
        <span>made by erdavids</span>
        </div>
        
        
        
        <script>
        
            var commandprompt = document.getElementById("commandprompt");
            commandprompt.addEventListener("keydown", function (e) {
                if (e.keyCode === 13) {
                    executeCommand(e);
                }
            });
            
            function executeCommand(e) {
                var test = document.getElementById('commandprompt').value
                document.getElementById('commandprompt').value = ""
                    
                if (test === 'save') {
                    download()
                } else if (test === 'reset') {
                    reset()
                }
            }

            var updateMetrics = setInterval(updateMetrics, 4000);

            function updateMetrics() {
                var text = document.getElementById("page").value;
                console.log(text);
                
                if (text) {
                    document.getElementById("wordcount").textContent = text.split(' ').length + ' words'
                } else {
                    document.getElementById("wordcount").textContent = "0 words"
                }
            }

            function download(){
                var text = document.getElementById("page").value;
                text = text.replace(/\n/g, "\r\n"); // To retain the Line breaks.
                var blob = new Blob([text], { type: "text/plain"});
                var anchor = document.createElement("a");
                anchor.download = "my-filename.txt";
                anchor.href = window.URL.createObjectURL(blob);
                anchor.target ="_blank";
                anchor.style.display = "none"; // just to be safe!
                document.body.appendChild(anchor);
                anchor.click();
                document.body.removeChild(anchor);
            }

            function reset() {
                document.getElementById("page").value = ""
            }
        
        </script>
        
    </body>
</html>
